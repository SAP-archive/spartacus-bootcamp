"use strict";(self.webpackChunkspa5store=self.webpackChunkspa5store||[]).push([[112],{5112:(Xe,E,a)=>{a.r(E),a.d(E,{AsmModule:()=>He});var e=a(4650),m=a(6895),u=a(4006),r=a(4367),d=a(3125),p=a(2654),v=a(1086),W=a(13),X=a(5778),D=a(7545),h=a(4850),V=a(2986),A=a(5344),l=a(8555),q=a(6053),K=a(7221),$=a(2198),S=a(5024);const ee={asm:{agentSessionTimer:{startingDelayInSeconds:600},customerSearch:{maxResults:20}}};class R{}let k=(()=>{class t{constructor(n){this.asmAdapter=n}customerSearch(n){return this.asmAdapter.customerSearch(n)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(R))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const C="[Asm] UI Update";class _{constructor(s){this.payload=s,this.type=C}}const f="[asm] Customer search data",T="[Asm] Customer Search";class N extends r.kPG.LoaderLoadAction{constructor(s){super(f),this.payload=s,this.type=T}}class P extends r.kPG.LoaderFailAction{constructor(s){super(f),this.payload=s,this.type="[Asm] Customer Search Fail"}}class z extends r.kPG.LoaderSuccessAction{constructor(s){super(f),this.payload=s,this.type="[Asm] Customer Search Success"}}class G extends r.kPG.LoaderResetAction{constructor(){super(f),this.type="[Asm] Customer Search Reset"}}const ne=[(()=>{class t{constructor(n,o){this.actions$=n,this.asmConnector=o,this.customerSearch$=(0,S.GW)(()=>this.actions$.pipe((0,S.l4)(T),(0,h.U)(i=>i.payload),(0,D.w)(i=>this.asmConnector.customerSearch(i).pipe((0,h.U)(c=>new z(c)),(0,K.K)(c=>(0,v.of)(new P((0,r.cxH)(c))))))))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(S.eX),e.LFG(k))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})()],se={collapsed:!1};function oe(t=se,s){return s.type===C?{...t,...s.payload}:t}const Q=new e.OlP("AsmReducers"),re={provide:Q,useFactory:function ie(){return{customerSearchResult:r.kPG.loaderReducer(f),asmUi:oe}}},ae=[function ce(t){return function(s,n){return"[Auth] Logout Customer Support Agent"===n.type&&(s={...s,customerSearchResult:{}}),t(s,n)}}],y=(0,l.ZF)("asm"),L=(0,l.P1)(y,t=>t.asmUi),b=(0,l.P1)(y,t=>t.customerSearchResult),B=(0,l.P1)(b,t=>r.kPG.loaderValueSelector(t)),j=(0,l.P1)(b,t=>r.kPG.loaderLoadingSelector(t));let ue=(()=>{class t{constructor(n,o,i){this.statePersistenceService=n,this.store=o,this.authStorageService=i,this.subscription=new p.w,this.key="asm"}initSync(){this.subscription.add(this.statePersistenceService.syncWithStorage({key:this.key,state$:this.getAsmState(),onRead:n=>this.onRead(n)}))}getAsmState(){return(0,q.aj)([this.store.pipe((0,$.h)(n=>!!n.asm),(0,l.Ys)(L)),(0,v.of)(this.authStorageService.getEmulatedUserToken()),this.authStorageService.getTokenTarget()]).pipe((0,h.U)(([n,o,i])=>{let c=o;return c&&(c={...o},delete c.refresh_token),{ui:n,emulatedUserToken:c,tokenTarget:i}}))}onRead(n){n&&(n.ui&&this.store.dispatch(new _(n.ui)),n.emulatedUserToken&&this.authStorageService.setEmulatedUserToken(n.emulatedUserToken),n.tokenTarget&&this.authStorageService.setTokenTarget(n.tokenTarget))}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(r.WBb),e.LFG(l.yh),e.LFG(A.JW))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),me=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[re],imports:[m.ez,r.vUS,l.Aw.forFeature("asm",Q,{metaReducers:ae}),S.sQ.forFeature(ne)]}),t})();function le(t){return()=>t.initSync()}let ge=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[(0,r.i51)(ee),k,{provide:r.z4I,useFactory:le,deps:[ue],multi:!0}],imports:[m.ez,me]}),t})(),M=(()=>{class t extends r.Vri{}return t.\u0275fac=function(){let s;return function(o){return(s||(s=e.n5z(t)))(o||t)}}(),t.\u0275prov=e.Yz7({token:t,factory:function(n){let o=null;return o=n?new(n||t):e.LFG(r.DeH),o},providedIn:"root"}),t})();const de=new e.OlP("CustomerSearchPageNormalizer");let U=(()=>{class t{constructor(n){this.store=n}customerSearch(n){this.store.dispatch(new N(n))}customerSearchReset(){this.store.dispatch(new G)}getCustomerSearchResults(){return this.store.pipe((0,l.Ys)(B))}getCustomerSearchResultsLoading(){return this.store.pipe((0,l.Ys)(j))}updateAsmUiState(n){this.store.dispatch(new _(n))}getAsmUiState(){return this.store.pipe((0,l.Ys)(L))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(l.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var H=a(7212);function pe(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.onSubmit())}),e.TgZ(1,"label"),e._UZ(2,"input",3),e.ALo(3,"cxTranslate"),e._UZ(4,"cx-form-errors",4),e.qZA(),e.TgZ(5,"label"),e._UZ(6,"input",5),e.ALo(7,"cxTranslate"),e._UZ(8,"cx-form-errors",4),e.qZA(),e.TgZ(9,"button",6),e._uU(10),e.ALo(11,"cxTranslate"),e.qZA()()}if(2&t){const n=e.oxw();e.Q6J("formGroup",n.csAgentLoginForm),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"asm.loginForm.userId.label")),e.xp6(2),e.Q6J("control",n.csAgentLoginForm.get("userId")),e.xp6(2),e.s9C("placeholder",e.lcZ(7,8,"asm.loginForm.password.label")),e.xp6(2),e.Q6J("control",n.csAgentLoginForm.get("password")),e.xp6(2),e.hij(" ",e.lcZ(11,10,"asm.loginForm.submit")," ")}}function fe(t,s){1&t&&(e.TgZ(0,"div",7),e.ALo(1,"cxTranslate"),e._UZ(2,"div")(3,"div")(4,"div"),e.qZA()),2&t&&e.uIk("aria-label",e.lcZ(1,1,"common.loading"))}const he=["resultList"],Ae=["searchTerm"];function Se(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){const c=e.CHM(n).$implicit,g=e.oxw(2);return e.KtG(g.selectCustomerFromList(c))}),e.TgZ(1,"span",11),e._uU(2),e.qZA(),e.TgZ(3,"span",12),e._uU(4),e.qZA()()}if(2&t){const n=s.$implicit;e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(n.uid)}}function ve(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.closeResults())}),e._uU(1),e.ALo(2,"cxTranslate"),e.qZA()}2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"asm.customerSearch.noMatch")," "))}function Ce(t,s){if(1&t&&(e.TgZ(0,"div",6,7),e.YNc(2,Se,5,2,"button",8),e.YNc(3,ve,3,3,"button",9),e.ALo(4,"async"),e.qZA()),2&t){const n=s.ngIf,o=e.oxw(),i=e.MAs(3);e.xp6(2),e.Q6J("ngForOf",n.entries),e.xp6(1),e.Q6J("ngIf",!e.lcZ(4,2,o.searchResultsLoading$)&&i.value.length>=3&&!!n.entries&&n.entries.length<=0)}}function _e(t,s){1&t&&(e.TgZ(0,"div",6)(1,"div",13),e.ALo(2,"cxTranslate"),e._UZ(3,"div")(4,"div")(5,"div"),e.qZA()()),2&t&&(e.xp6(1),e.uIk("aria-label",e.lcZ(2,1,"common.loading")))}function Te(t,s){if(1&t){const n=e.EpF();e.ynx(0),e._UZ(1,"input",1),e.TgZ(2,"button",2),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.logoutCustomer())}),e._uU(3),e.ALo(4,"cxTranslate"),e.qZA(),e.BQk()}if(2&t){const n=e.oxw();e.xp6(1),e.hYB("placeholder","",null==n.customer?null:n.customer.name,", ",null==n.customer?null:n.customer.uid,""),e.xp6(2),e.hij(" ",e.lcZ(4,3,"asm.endSession")," ")}}function xe(t,s){1&t&&(e.TgZ(0,"span",3),e._uU(1),e.ALo(2,"cxTranslate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"asm.toggleUi.collapse")," "))}function ye(t,s){1&t&&(e.TgZ(0,"span",3),e._uU(1),e.ALo(2,"cxTranslate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"asm.toggleUi.expand")," "))}function Le(t,s){1&t&&e._UZ(0,"cx-asm-session-timer")}function be(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.hideUi())}),e.ALo(1,"cxTranslate"),e.qZA()}2&t&&e.s9C("title",e.lcZ(1,1,"asm.hideUi"))}function Me(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.logout())}),e.ALo(1,"cxTranslate"),e.qZA()}2&t&&e.s9C("title",e.lcZ(1,1,"asm.logout"))}function Ue(t,s){1&t&&e._UZ(0,"cx-customer-emulation")}function Fe(t,s){if(1&t&&(e.ynx(0),e.YNc(1,Ue,1,0,"cx-customer-emulation",5),e.BQk()),2&t){const n=e.oxw(2).ngIf;e.xp6(1),e.Q6J("ngIf",n)}}function Ie(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"cx-customer-selection",14),e.NdJ("submitEvent",function(i){e.CHM(n);const c=e.oxw(4);return e.KtG(c.startCustomerEmulationSession(i))}),e.qZA()}}function Ze(t,s){if(1&t&&e.YNc(0,Ie,1,0,"cx-customer-selection",13),2&t){const n=e.oxw(2).ngIf;e.Q6J("ngIf",n)}}function Ee(t,s){if(1&t&&(e.ynx(0),e.YNc(1,Fe,2,1,"ng-container",10),e.ALo(2,"async"),e.YNc(3,Ze,1,1,"ng-template",null,12,e.W1O),e.BQk()),2&t){const n=e.MAs(4),o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,o.customer$))("ngIfElse",n)}}function De(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"cx-csagent-login-form",16),e.NdJ("submitEvent",function(i){e.CHM(n);const c=e.oxw(3);return e.KtG(c.loginCustomerSupportAgent(i))}),e.ALo(1,"async"),e.qZA()}if(2&t){const n=e.oxw(3);e.Q6J("csAgentTokenLoading",e.lcZ(1,1,n.csAgentTokenLoading$))}}function Re(t,s){if(1&t&&e.YNc(0,De,2,3,"cx-csagent-login-form",15),2&t){const n=e.oxw().ngIf;e.Q6J("ngIf",n)}}function ke(t,s){if(1&t&&(e.ynx(0),e.YNc(1,Ee,5,4,"ng-container",10),e.ALo(2,"async"),e.YNc(3,Re,1,1,"ng-template",null,11,e.W1O),e.BQk()),2&t){const n=e.MAs(4),o=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,o.customerSupportAgentLoggedIn$))("ngIfElse",n)}}let F=(()=>{class t{constructor(n,o,i){this.authService=n,this.csAgentAuthService=o,this.winRef=i}logoutCustomerSupportAgentAndCustomer(){this.csAgentAuthService.logoutCustomerSupportAgent()}logoutCustomer(){this.authService.logout()}isCustomerEmulationSessionInProgress(){return this.csAgentAuthService.isCustomerEmulated()}unload(){this.winRef.localStorage&&this.winRef.localStorage.removeItem(A.AJ)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(r.e80),e.LFG(A.FA),e.LFG(r.X9E))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Oe=(()=>{class t{constructor(n){this.fb=n,this.csAgentTokenLoading=!1,this.submitEvent=new e.vpe}ngOnInit(){this.csAgentLoginForm=this.fb.group({userId:["",[u.kI.required]],password:["",[u.kI.required]]})}onSubmit(){this.csAgentLoginForm.valid?this.submitEvent.emit({userId:this.csAgentLoginForm.get("userId")?.value,password:this.csAgentLoginForm.get("password")?.value}):this.csAgentLoginForm.markAllAsTouched()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.QS))},t.\u0275cmp=e.Xpm({type:t,selectors:[["cx-csagent-login-form"]],inputs:{csAgentTokenLoading:"csAgentTokenLoading"},outputs:{submitEvent:"submitEvent"},decls:2,vars:2,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],["class","spinner","aria-hidden","false",4,"ngIf"],[3,"formGroup","ngSubmit"],["required","true","type","text","formControlName","userId",3,"placeholder"],[3,"control"],["required","true","type","password","formControlName","password","cxPasswordVisibilitySwitch","",3,"placeholder"],["type","submit"],["aria-hidden","false",1,"spinner"]],template:function(n,o){1&n&&(e.YNc(0,pe,12,12,"form",0),e.YNc(1,fe,5,3,"div",1)),2&n&&(e.Q6J("ngIf",!o.csAgentTokenLoading),e.xp6(1),e.Q6J("ngIf",o.csAgentTokenLoading))},dependencies:[m.O5,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u,d.Ahv,d.X84,r.X$D],encapsulation:2}),t})(),we=(()=>{class t{constructor(n,o,i){this.fb=n,this.asmService=o,this.config=i,this.subscription=new p.w,this.submitEvent=new e.vpe}ngOnInit(){this.customerSelectionForm=this.fb.group({searchTerm:["",u.kI.required]}),this.asmService.customerSearchReset(),this.searchResultsLoading$=this.asmService.getCustomerSearchResultsLoading(),this.searchResults=this.asmService.getCustomerSearchResults(),this.subscription.add(this.customerSelectionForm.controls.searchTerm.valueChanges.pipe((0,W.b)(300)).subscribe(n=>{this.handleSearchTerm(n)}))}handleSearchTerm(n){!!this.selectedCustomer&&n!==this.selectedCustomer.name&&(this.selectedCustomer=void 0),!Boolean(this.selectedCustomer)&&(this.asmService.customerSearchReset(),n.trim().length>=3&&this.asmService.customerSearch({query:n,pageSize:this.config.asm?.customerSearch?.maxResults}))}selectCustomerFromList(n){this.selectedCustomer=n,this.customerSelectionForm.controls.searchTerm.setValue(this.selectedCustomer.name),this.asmService.customerSearchReset()}onSubmit(){this.customerSelectionForm.valid&&this.selectedCustomer?this.submitEvent.emit({customerId:this.selectedCustomer.customerId}):this.customerSelectionForm.markAllAsTouched()}onDocumentClick(n){if(Boolean(this.resultList)){if(this.resultList.nativeElement.contains(n.target)||this.searchTerm.nativeElement.contains(n.target))return;this.asmService.customerSearchReset()}}closeResults(){this.asmService.customerSearchReset()}ngOnDestroy(){this.subscription.unsubscribe(),this.asmService.customerSearchReset()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.QS),e.Y36(U),e.Y36(M))},t.\u0275cmp=e.Xpm({type:t,selectors:[["cx-customer-selection"]],viewQuery:function(n,o){if(1&n&&(e.Gf(he,5),e.Gf(Ae,5)),2&n){let i;e.iGM(i=e.CRH())&&(o.resultList=i.first),e.iGM(i=e.CRH())&&(o.searchTerm=i.first)}},hostBindings:function(n,o){1&n&&e.NdJ("click",function(c){return o.onDocumentClick(c)},!1,e.evT)},outputs:{submitEvent:"submitEvent"},decls:13,vars:14,consts:[[3,"formGroup","ngSubmit"],["required","true","type","text","formControlName","searchTerm",3,"placeholder"],["searchTerm",""],[3,"control"],["type","submit"],["class","asm-results",4,"ngIf"],[1,"asm-results"],["resultList",""],[3,"click",4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],[1,"result-name"],[1,"result-id"],["aria-hidden","false",1,"spinner"]],template:function(n,o){1&n&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(1,"label"),e._UZ(2,"input",1,2),e.ALo(4,"cxTranslate"),e._UZ(5,"cx-form-errors",3),e.qZA(),e.TgZ(6,"button",4),e._uU(7),e.ALo(8,"cxTranslate"),e.qZA()(),e.YNc(9,Ce,5,4,"div",5),e.ALo(10,"async"),e.YNc(11,_e,6,3,"div",5),e.ALo(12,"async")),2&n&&(e.Q6J("formGroup",o.customerSelectionForm),e.xp6(2),e.s9C("placeholder",e.lcZ(4,6,"asm.customerSearch.searchTerm.label")),e.xp6(3),e.Q6J("control",o.customerSelectionForm.get("searchTerm")),e.xp6(2),e.hij(" ",e.lcZ(8,8,"asm.customerSearch.submit")," "),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,10,o.searchResults)),e.xp6(2),e.Q6J("ngIf",e.lcZ(12,12,o.searchResultsLoading$)))},dependencies:[m.sg,m.O5,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u,d.Ahv,m.Ov,r.X$D],encapsulation:2}),t})(),Je=(()=>{class t{transform(n){n<0&&(n=0);const o=Math.floor(n/60),i=n%60;let c;return c=o<10?("00"+o).slice(-2):o+"",`${c}:${("00"+i).slice(-2)}`}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"formatTimer",type:t,pure:!0}),t})(),Ye=(()=>{class t{constructor(n,o,i,c,g){this.config=n,this.asmComponentService=o,this.routingService=i,this.changeDetectorRef=c,this.userIdService=g,this.subscriptions=new p.w,this.maxStartDelayInSeconds=6e4}ngOnInit(){this.timeLeft=this.getTimerStartDelayInSeconds(),this.interval=setInterval(()=>{this.timeLeft>0?this.timeLeft--:(clearInterval(this.interval),this.asmComponentService.logoutCustomerSupportAgentAndCustomer()),this.changeDetectorRef.markForCheck()},1e3),this.resetOnNavigate(),this.resetOnCustomerSessionChange()}resetOnNavigate(){this.subscriptions.add(this.routingService.isNavigating().subscribe(n=>{n&&this.resetTimer()}))}resetOnCustomerSessionChange(){this.subscriptions.add(this.userIdService.getUserId().pipe((0,X.x)()).subscribe(()=>this.resetTimer()))}resetTimer(){this.timeLeft>0&&(this.timeLeft=this.getTimerStartDelayInSeconds())}getTimerStartDelayInSeconds(){return void 0===this.config.asm?.agentSessionTimer?.startingDelayInSeconds?600:this.config.asm.agentSessionTimer.startingDelayInSeconds>this.maxStartDelayInSeconds?this.maxStartDelayInSeconds:this.config.asm.agentSessionTimer.startingDelayInSeconds}ngOnDestroy(){this.subscriptions.unsubscribe(),this.interval&&clearInterval(this.interval)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(M),e.Y36(F),e.Y36(r.Znh),e.Y36(e.sBO),e.Y36(r.XBV))},t.\u0275cmp=e.Xpm({type:t,selectors:[["cx-asm-session-timer"]],decls:9,vars:12,consts:[[1,"label"],[1,"time"],[1,"reset",3,"title","click"]],template:function(n,o){1&n&&(e.TgZ(0,"span",0),e._uU(1),e.ALo(2,"cxTranslate"),e.qZA(),e.TgZ(3,"span",1),e._uU(4),e.ALo(5,"formatTimer"),e.ALo(6,"cxTranslate"),e.qZA(),e.TgZ(7,"button",2),e.NdJ("click",function(){return o.resetTimer()}),e.ALo(8,"cxTranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij("",e.lcZ(2,4,"asm.agentSessionTimer.label"),":"),e.xp6(3),e.AsE("",e.lcZ(5,6,o.timeLeft)," ",e.lcZ(6,8,"asm.agentSessionTimer.minutes"),""),e.xp6(3),e.s9C("title",e.lcZ(8,10,"asm.agentSessionTimer.reset")))},dependencies:[r.X$D,Je],encapsulation:2}),t})(),Ne=(()=>{class t{constructor(n,o){this.asmComponentService=n,this.userAccountFacade=o,this.subscription=new p.w}ngOnInit(){this.subscription.add(this.userAccountFacade.get().subscribe(n=>{n&&(this.customer=n)})),this.isCustomerEmulationSessionInProgress$=this.asmComponentService.isCustomerEmulationSessionInProgress()}logoutCustomer(){this.asmComponentService.logoutCustomer()}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(F),e.Y36(H.gf))},t.\u0275cmp=e.Xpm({type:t,selectors:[["cx-customer-emulation"]],decls:2,vars:3,consts:[[4,"ngIf"],["formcontrolname","customer","type","text","disabled","true",3,"placeholder"],[3,"click"]],template:function(n,o){1&n&&(e.YNc(0,Te,5,5,"ng-container",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,o.isCustomerEmulationSessionInProgress$))},dependencies:[m.O5,m.Ov,r.X$D],encapsulation:2}),t})(),Pe=(()=>{class t{constructor(n){this.asmService=n,this.subscription=new p.w}ngOnInit(){this.subscription.add(this.asmService.getAsmUiState().subscribe(n=>{this.isCollapsed=void 0!==n.collapsed&&n.collapsed}))}toggleUi(){this.asmService.updateAsmUiState({collapsed:!this.isCollapsed})}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(U))},t.\u0275cmp=e.Xpm({type:t,selectors:[["cx-asm-toggle-ui"]],decls:4,vars:3,consts:[[1,"toggleUi",3,"click"],[3,"ngClass"],["class","label",4,"ngIf"],[1,"label"]],template:function(n,o){1&n&&(e.TgZ(0,"a",0),e.NdJ("click",function(){return o.toggleUi()}),e._UZ(1,"span",1),e.YNc(2,xe,3,3,"span",2),e.YNc(3,ye,3,3,"span",2),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngClass",o.isCollapsed?"expandIcon":"collapseIcon"),e.xp6(1),e.Q6J("ngIf",!o.isCollapsed),e.xp6(1),e.Q6J("ngIf",o.isCollapsed))},dependencies:[m.mk,m.O5,r.X$D],encapsulation:2}),t})();const ze={launch:{ASM:{outlet:"cx-storefront",component:(()=>{class t{constructor(n,o,i,c,g,Z,We){this.authService=n,this.csAgentAuthService=o,this.asmComponentService=i,this.globalMessageService=c,this.routingService=g,this.asmService=Z,this.userAccountFacade=We,this.disabled=!1,this.startingCustomerSession=!1}ngOnInit(){this.customerSupportAgentLoggedIn$=this.csAgentAuthService.isCustomerSupportAgentLoggedIn(),this.csAgentTokenLoading$=this.csAgentAuthService.getCustomerSupportAgentTokenLoading(),this.customer$=this.authService.isUserLoggedIn().pipe((0,D.w)(n=>n?(this.handleCustomerSessionStartRedirection(),this.userAccountFacade.get()):(0,v.of)(void 0))),this.isCollapsed$=this.asmService.getAsmUiState().pipe((0,h.U)(n=>void 0!==n.collapsed&&n.collapsed))}handleCustomerSessionStartRedirection(){this.asmComponentService.isCustomerEmulationSessionInProgress().pipe((0,V.q)(1)).subscribe(n=>{this.startingCustomerSession&&n&&(this.startingCustomerSession=!1,this.globalMessageService.remove(r.xUg.MSG_TYPE_ERROR),this.routingService.go("/"))})}loginCustomerSupportAgent({userId:n,password:o}){this.csAgentAuthService.authorizeCustomerSupportAgent(n,o)}logout(){this.asmComponentService.logoutCustomerSupportAgentAndCustomer()}startCustomerEmulationSession({customerId:n}){n?(this.csAgentAuthService.startCustomerEmulationSession(n),this.startingCustomerSession=!0):this.globalMessageService.add({key:"asm.error.noCustomerId"},r.xUg.MSG_TYPE_ERROR)}hideUi(){this.disabled=!0,this.asmComponentService.unload()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(r.e80),e.Y36(A.FA),e.Y36(F),e.Y36(r.IWp),e.Y36(r.Znh),e.Y36(U),e.Y36(H.gf))},t.\u0275cmp=e.Xpm({type:t,selectors:[["cx-asm-main-ui"]],hostVars:2,hostBindings:function(n,o){2&n&&e.ekj("hidden",o.disabled)},decls:18,vars:20,consts:[[1,"asm-bar"],[1,"asm-bar-branding"],["src","data:image/png;base64,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","width","48","height","24",1,"logo",3,"alt"],[1,"asm-title"],[1,"asm-bar-actions"],[4,"ngIf"],["class","close",3,"title","click",4,"ngIf"],["class","logout",3,"title","click",4,"ngIf"],[1,"close",3,"title","click"],[1,"logout",3,"title","click"],[4,"ngIf","ngIfElse"],["showLoginForm",""],["showCustomerSelection",""],[3,"submitEvent",4,"ngIf"],[3,"submitEvent"],[3,"csAgentTokenLoading","submitEvent",4,"ngIf"],[3,"csAgentTokenLoading","submitEvent"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.ALo(3,"cxTranslate"),e.TgZ(4,"div",3),e._uU(5),e.ALo(6,"cxTranslate"),e.qZA()(),e.TgZ(7,"div",4),e._UZ(8,"cx-asm-toggle-ui"),e.YNc(9,Le,1,0,"cx-asm-session-timer",5),e.ALo(10,"async"),e.YNc(11,be,2,3,"button",6),e.ALo(12,"async"),e.ALo(13,"async"),e.YNc(14,Me,2,3,"button",7),e.ALo(15,"async"),e.qZA()(),e.YNc(16,ke,5,4,"ng-container",5),e.ALo(17,"async")),2&n&&(e.xp6(2),e.s9C("alt",e.lcZ(3,6,"asm.mainLogoLabel")),e.xp6(3),e.hij(" ",e.lcZ(6,8,"asm.mainTitle")," "),e.xp6(4),e.Q6J("ngIf",e.lcZ(10,10,o.customerSupportAgentLoggedIn$)),e.xp6(2),e.Q6J("ngIf",!e.lcZ(12,12,o.customerSupportAgentLoggedIn$)&&!e.lcZ(13,14,o.csAgentTokenLoading$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(15,16,o.customerSupportAgentLoggedIn$)),e.xp6(2),e.Q6J("ngIf",!e.lcZ(17,18,o.isCollapsed$)))},dependencies:[m.O5,Oe,we,Ye,Ne,Pe,m.Ov,r.X$D],encapsulation:2}),t})()}}};let Ge=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[(0,r.i51)(ze)],imports:[m.ez,u.UX,r.LUR,d.Fym,d.Ird]}),t})();var I=a(529);let Qe=(()=>{class t{constructor(n,o,i,c,g){this.http=n,this.occEndpointsService=o,this.converterService=i,this.config=c,this.baseSiteService=g,this.baseSiteService.getActive().subscribe(Z=>this.activeBaseSite=Z)}customerSearch(n){const o=r.Fox.createHeader(r.OPk,!0,new I.WM);let i=(new I.LE).set("baseSite",this.activeBaseSite).set("sort","byNameAsc");typeof n.query<"u"&&(i=i.set("query",""+n.query)),typeof n.pageSize<"u"&&(i=i.set("pageSize",""+n.pageSize));const c=this.occEndpointsService.buildUrl("asmCustomerSearch",{},{baseSite:!1,prefix:!1});return this.http.get(c,{headers:o,params:i}).pipe(this.converterService.pipeable(de))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(I.eN),e.LFG(r.Lz0),e.LFG(r.IXI),e.LFG(M),e.LFG(r.Do$))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();const Be={backend:{occ:{endpoints:{asmCustomerSearch:"/assistedservicewebservices/customers/search"}}}};let je=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[(0,r.i51)(Be),{provide:R,useClass:Qe}],imports:[m.ez]}),t})(),He=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[Ge,ge,je]}),t})()}}]);